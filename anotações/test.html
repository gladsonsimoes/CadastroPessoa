<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <form action="" class="tabela">

        <label id="etiqueta" for="nome">Nome</label>
        <input required type="text" name="nome" placeholder="Digite seu nome">

        <label for="idade">Idade</label>
        <input required type="number" name="idade" placeholder="Digite sua idade">

        <label for="cidade">Cidade</label>
        <input  type="text" name="cidade" placeholder="Digite a sua cidade" required>

        <button id="adicionar_dados">Adicionar Linha</button>

    </form>
    <div class="alerta"></div>

    <hr>

    <table border="2px solid">
        <thead>
            <tr>
                <td>Nome</td>
                <td>Idade</td>
                <td>Cidade</td>
            </tr>
        </thead>

        <tbody>

        </tbody>

        <hr>
    </table>
    <script>

        //
        var botao_adicionar = document.querySelector("#adicionar_dados");

        //variaveis pegando os values do input name  
        var campo_idade = document.querySelector("input[name='idade']");
        var campo_nome = document.querySelector("input[name='nome']");
        var campo_cidade = document.querySelector("input[name='cidade']");

        var corpo_tabela = document.querySelector("tbody");

        var contTab = 0;


        //funcoes
        function TabelaDinamica(nome, idade, cidade) {

            //dentro do objeto
            this.nome = nome;
            this.idade = idade;
            this.cidade = cidade;

            //mostrar as values
            this.mostrar_dados = function () {
                console.log(" nome é" + this.nome +
                    "a idade é" + this.idade +
                    "e a cidade é " + this.cidade)
            }

            this.criar_linha_tabela = function () {

                //criação da tabela
                var linha = document.createElement("tr");
                var campo_nome = document.createElement("td");
                var campo_idade = document.createElement("td");
                var campo_cidade = document.createElement("td");

                //criação do campo dentro da tabela
                var inputNome = document.createElement("textarea");
                var inputIdade = document.createElement("textarea");
                var inputCidade = document.createElement("textarea");

                //não sei pra que serve
                // inputNome.setAttribute('disabled', true);
                // inputIdade.setAttribute('disabled', true);
                // inputCidade.setAttribute('disabled', true);

                //variaveis de 
                var texto_nome = document.createTextNode(this.nome);
                var texto_idade = document.createTextNode(this.idade);
                var texto_cidade = document.createTextNode(this.cidade);


                inputNome.appendChild(texto_nome);
                inputIdade.appendChild(texto_idade);
                inputCidade.appendChild(texto_cidade);

                campo_cidade.appendChild(inputCidade);
                campo_idade.appendChild(inputIdade);
                campo_nome.appendChild(inputNome);

                //variavel do botão de editar
                var botao_editar = document.createElement("input");
                botao_editar.setAttribute('type', 'submit');
                botao_editar.setAttribute('value', 'editar');

                //variavel do botão de excluir
                var botao_excluir = document.createElement("input");
                botao_excluir.setAttribute('type', 'submit');
                botao_excluir.setAttribute('value', 'excluir');



                linha.appendChild(campo_nome);
                linha.appendChild(campo_idade);
                linha.appendChild(campo_cidade);
                linha.appendChild(botao_editar);
                linha.appendChild(botao_excluir);

                corpo_tabela.appendChild(linha);

                //botão para excluir
                botao_excluir.addEventListener('click', function () {
                    var tr = this.parentNode;
                    var tb = tr.parentNode;
                    tb.removeChild(tr);

                });

                //botão de editar
                botao_editar.addEventListener('click', function () {
                    var tr = this.parentNode;
                    for (var i = 0; i < tr.children.length - 2; i++) {
                        var td = tr.children[i];
                        if (td.children[0].tagName = 'textarea')
                            td.children[0].disabled = false;
                    }

                });


            }

        };

        function adicionar_dados(event) {

            event.preventDefault();

            nova_tabelaDinamica = new TabelaDinamica(campo_nome.value, campo_idade.value, campo_cidade.value);

            nova_tabelaDinamica.criar_linha_tabela();

            nova_tabelaDinamica.mostrar_dados();


        };

        //comando para adicionar atraves da variavel botao_adicionar
        botao_adicionar.addEventListener('click', adicionar_dados);
    </script>
</body>

</html>